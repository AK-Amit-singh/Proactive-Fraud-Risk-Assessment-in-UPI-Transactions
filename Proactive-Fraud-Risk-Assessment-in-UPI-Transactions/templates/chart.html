<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />

  <title>Proactive UPI Security System | Charts</title>
  <meta content="" name="description" />
  <meta content="" name="keywords" />

  <link href="../static/img/favicon.png" rel="icon" />
  <link href="../static/img/apple-touch-icon.png" rel="apple-touch-icon" />

  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet" />

  <link href="../static/vendor/aos/aos.css" rel="stylesheet" />
  <link href="../static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
  <link href="../static/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
  <link href="../static/vendor/boxicons/css/boxicons.min.css" rel="stylesheet" />
  <link href="../static/vendor/glightbox/css/glightbox.min.css" rel="stylesheet" />
  <link href="../static/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />

  <link href="../static/css/style.css" rel="stylesheet" />

  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>

<body>
  <header id="header" class="fixed-top d-flex align-items-cente">
    <div class="container-fluid container-xl d-flex align-items-center justify-content-lg-between">
      <h1 class="col-lg-8">
        <a href="{{ url_for('first')}}"> <span>Proactive UPI Security System</span></a>
      </h1>
      <nav id="navbar" class="navbar order-last order-lg-0">
        <ul>
          <li><a class="nav-link scrollto" href="{{ url_for('first')}}">Home</a></li>
          <li><a class="nav-link scrollto" href="{{ url_for('chart')}}">Chart</a></li>
          <li><a class="nav-link scrollto" href="{{ url_for('prediction1')}}">Check</a></li>

          {% if session.loggedin %}
          <li><a class="nav-link scrollto" href="{{ url_for('upload')}}">Upload</a></li>
          <li><a class="nav-link scrollto" href="{{ url_for('logout')}}"><b>Logout</b></a></li>
          {% else %}
          <li><a class="nav-link scrollto" href="{{ url_for('login')}}"><b>Admin Login</b></a></li>
          {% endif %}
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav>
    </div>
  </header>
  <section id="hero" class="d-flex align-items-center">
    <div class="container position-relative text-center text-lg-start" data-aos="zoom-in" data-aos-delay="100">
      <div class="row">
        <div class="col-lg-8">
          <h1><span>Data & Model Visualizations</span></h1>
        </div>
      </div>
    </div>
  </section>

  <main id="main">
    <section id="charts" class="book-a-table">
      <div class="container" data-aos="fade-up">
        <div class="section-title">
          <p>Fraud vs Normal Transaction Analysis</p>
        </div>
        <center >
          <div id="piechart_3d" style="width: 900px; height: 500px"></div>
        </center >
        <script type="text/javascript">
          google.charts.load("current", { packages: ["corechart"] });
          google.charts.setOnLoadCallback(drawPieChart);
          function drawPieChart() {
            // Data is now passed from app.py
            var data = google.visualization.arrayToDataTable({{ pie_data | tojson | safe }});

          var options = {
            title: 'Fraud vs Normal Transactions in the Dataset',
            is3D: true,
          };
          var chart = new google.visualization.PieChart(document.getElementById('piechart_3d'));
          chart.draw(data, options);
          }

        </script>

        <br /><br />
        <hr />
        <br /><br />

        <div class="section-title">
          <p>Total Transactions by Category</p>
        </div>
        <center>
          <div id="columnchart_values" style="width: 900px; height: 500px"></div>
        </center>
        <script type="text/javascript">
          google.charts.load("current", { packages: ['corechart'] });
          google.charts.setOnLoadCallback(drawColumnChart);
          function drawColumnChart() {
            // Data is now passed from app.py
            var data = google.visualization.arrayToDataTable({{ bar_data | tojson | safe }});

          var view = new google.visualization.DataView(data);
          view.setColumns([0, 1,
            {
              calc: "stringify",
              sourceColumn: 1,
              type: "string",
              role: "annotation"
            }
          ]);

          var options = {
            title: "Transaction Count per Category",
            width: 900,
            height: 500,
            bar: { groupWidth: "85%" },
            legend: { position: "none" },
          };
          var chart = new google.visualization.ColumnChart(document.getElementById("columnchart_values"));
          chart.draw(view, options);
          }
        </script>

        <br /><br />
        <hr />
        <br /><br />

        <div class="section-title">
          <p>Model Accuracy Comparison</p>
        </div>
        <center>
          <div id="accuracy_chart" style="width: 900px; height: 500px"></div>
        </center>
        <script type="text/javascript">
          google.charts.load("current", { packages: ['corechart'] });
          google.charts.setOnLoadCallback(drawAccuracyChart);
          function drawAccuracyChart() {
            // Data is now passed from app.py
            var data = google.visualization.arrayToDataTable({{ accuracy_data | tojson | safe }});
          // No additional code needed here; remove stray comma or incomplete statement if present.
          var view = new google.visualization.DataView(data);
          view.setColumns([0, 1,
            {
              calc: "stringify",
              sourceColumn: 1,
              type: "string",
              role: "annotation"
            },
            2]);

          var options = {
            title: "Accuracy Score of Different Models",
            width: 900,
            height: 500,
            bar: { groupWidth: "85%" },
            legend: { position: "none" },
            hAxis: {
              title: 'Model'
            },
            vAxis: {
              title: 'Accuracy (%)'
            }
          };
          var chart = new google.visualization.BarChart(document.getElementById("accuracy_chart"));
          chart.draw(view, options);
          }
        </script>
      </div>
    </section>
  </main>

  <footer id="footer">
    <div class="container">
      <div class="copyright"></div>
      <div class="credits"></div>
    </div>
  </footer>
  <div id="preloader"></div>
  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>

  <script src="../static/vendor/aos/aos.js"></script>
  <script src="../static/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="../static/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="../static/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="../static/vendor/php-email-form/validate.js"></script>
  <script src="../static/vendor/swiper/swiper-bundle.min.js"></script>

  <script src="../static/js/main.js"></script>
</body>

</html>